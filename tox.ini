[tox]
min_version = 4
env_list = py312, py313, lint, mypy, format-check
requires = uv

[gh]
python =
    3.12 = py312, lint, mypy, format-check
    3.13 = py313

[testenv]
deps = 
    sortedcontainers>=2.4.0
    pytest>=7.0.0
    pytest-cov>=4.0.0
commands = pytest {posargs:tests} --cov=timeslotassigner --cov-report=term-missing --cov-report=xml

[testenv:lint]
deps = ruff>=0.1.0
commands = ruff check timeslotassigner tests benchmarks.py

[testenv:mypy]
deps = 
    mypy>=1.0.0
    sortedcontainers>=2.4.0
commands = mypy timeslotassigner

[testenv:format-check]
deps = ruff>=0.1.0
commands = ruff format --check timeslotassigner tests benchmarks.py

[testenv:format]
deps = ruff>=0.1.0
commands = ruff format timeslotassigner tests benchmarks.py

[testenv:benchmark]
deps = 
    sortedcontainers>=2.4.0
commands = python benchmarks.py

[testenv:docs]
deps = 
    sortedcontainers>=2.4.0
commands = python -m doctest timeslotassigner/calendar.py -v

[testenv:clean]
deps = coverage[toml]
skip_install = true
commands = coverage erase